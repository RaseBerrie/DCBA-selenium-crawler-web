{% extends "crawler_index.html" %}
{% block crawler_html %}

<div class="alert alert-primary" role="alert">
    <h5 class="alert-heading">크롤러 작동 중이 아닙니다.</h5>
    <p>마지막 세션이 종료된 후로 {{ time_diff[-3] }}시간 {{ time_diff[-2] }}분 지났습니다.</p>
    <hr>
    <p class="mb-0">
        <b>Bing 종료 시각</b> {{ bing_data }}, <b>Google 종료 시각</b> {{ google_data }}
    </p>
  </div>

<div class="container row row-cols-2 mx-auto">

    <div class="col col-8 my-auto"> <div class="row">
        <div class="form-check form-check-inline col">
            <input class="form-check-input" type="checkbox" id="b_def">
            <label class="form-check-label" for="b_def">Bing</label>
            <span class="badge rounded-pill text-bg-secondary" style="pointer-events: none;">DEF</span>
        </div>
        <div class="form-check form-check-inline col">
            <input class="form-check-input" type="checkbox" id="g_def">
            <label class="form-check-label" for="g_def">구글</label>
            <span class="badge rounded-pill text-bg-secondary" style="pointer-events: none;">DEF</span>
        </div>
        <div class="form-check form-check-inline col">
            <input class="form-check-input" type="checkbox" id="b_git">
            <label class="form-check-label" for="b_git">Bing</label>
            <span class="badge rounded-pill text-bg-primary" style="pointer-events: none;">GIT</span>
        </div>
        <div class="form-check form-check-inline col">
            <input class="form-check-input" type="checkbox" id="g_git">
            <label class="form-check-label" for="g_git">구글</label>
            <span class="badge rounded-pill text-bg-primary" style="pointer-events: none;">GIT</span>
        </div>
    </div> </div>
    
    <button id="start-crawl" class="btn btn-outline-primary col-4 mx-auto" style="word-break: keep-all;">
        프로그램 시작
    </button>

</div>

<script>
$("#start-crawl").on("click", function() {
    setTimeout( () => {location.reload();}, 1000);
    $.ajax({
        type: "GET",
        dataType: "json",
        url: "http://192.168.6.90:4000/crawler/run",
        data: {
            args: JSON.stringify({
                "b_def": $('#b_def').is(':checked'),
                "g_def": $('#g_def').is(':checked'),
                "b_git": $('#b_git').is(':checked'),
                "g_git": $('#g_git').is(':checked')
            }),
        }
    })
});
</script>

{% endblock %}