{% if not processing %}
{% extends "crawler_index.html" %}
{% endif %}

{% block crawler_html %}

<pre id="queue-status">Loading...</pre>

<script>
    async function fetchQueueStatus() {
        try {
            const response = await fetch('http://192.168.6.90:4000/crawler/status');
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            const data = await response.json();
            document.getElementById('queue-status').textContent = JSON.stringify(data, null, 2);
        } catch (error) {
            document.getElementById('queue-status').textContent = 'Failed to load queue status: ' + error;
        }
    }

    // 주기적으로 큐 상태 업데이트 (1초마다)
    setInterval(fetchQueueStatus, 1000);
    fetchQueueStatus();
</script>

{% endblock %}